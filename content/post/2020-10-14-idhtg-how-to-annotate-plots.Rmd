---
title: IDHTG how to annotate plots
author: ''
date: '2020-10-14'
slug: idhtg-how-to-annotate-plots
image: "img/portfolio/annotate.png"
categories: []
tags: []
---

A new post in my I Don't Have to Google (IDHTG) series. I've been wanting to work out how to add annotations to plots for a while and this plot from the @WeAreRladies account this week got me inspired!  

<blockquote class="twitter-tweet"><p lang="en" dir="ltr">I also looked at activity by week. You can see that there are some weeks when there was a break between curators. You can also see curators are totally different - both in terms of number of tweets and the number of retweets and replies. One curator tweeted over 200 times! ðŸ¤¯ <a href="https://t.co/F49YddjxUx">pic.twitter.com/F49YddjxUx</a></p>&mdash; We are R-Ladies (@WeAreRLadies) <a href="https://twitter.com/WeAreRLadies/status/1313178171219619840?ref_src=twsrc%5Etfw">October 5, 2020</a></blockquote> <script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>

<br>

Giorgia, who is curating WeAreRLadies this week, suggested checking out [this blog post](https://cedricscherer.netlify.app/2019/05/17/the-evolution-of-a-ggplot-ep.-1/) by Cedric Scherer. It is a great illustration of how you might start with a basic box plot and turn it into something that looks REALLY fancy, step by step. 

Lets plot some penguin data to practice.

# load packages

```{r message=FALSE, warning=FALSE}
library(tidyverse)
library(palmerpenguins)
```

# read data
```{r}
penguins <- penguins
```

# plot body mass by flipper length

Add text to a ggplot using annotate(), just define x and y coordinates and what you want the label to say. 

```{r message=FALSE, warning=FALSE}

g_text <- penguins %>%
  ggplot(aes(x = flipper_length_mm, y = body_mass_g, colour = species)) +
  geom_point() +
  annotate("text", x = 180, y = 6000, label = "Add text here") +
  annotate("text", x = 220, y = 3000, label = "More text here")
  
  
g_text

```
To add arrows, first make a tibble that has x1, x2, y1, and y2 coordinates for where you want the curved line to start and stop. On my penguin plot I want two arrows, one in the top left and another in the bottom right. 

```{r}
arrows <- 
  tibble(
    x1 = c(187, 212),
    x2 = c(205, 204),
    y1 = c(6000, 3000), 
    y2 = c(5500, 3500)
  )

arrows

```

Then use geom_curve() to add arrows, adjusting and adjusting and adjusting until they fall where you want them. 

```{r message=FALSE, warning=FALSE}
g_text +
  geom_curve(
    data = arrows, aes(x = x1, y = y1, xend = x2, yend = y2),
    arrow = arrow(length = unit(0.08, "inch")), size = 0.5,
    color = "gray20", curvature = -0.3)
```
We should probably make the annotations meaningful. 

```{r message=FALSE, warning=FALSE}
penguins %>%
  ggplot(aes(x = flipper_length_mm, y = body_mass_g, colour = species)) +
  geom_point() +
  annotate("text", x = 180, y = 6000, label = "Gentoo penguins \n are much larger") +
  annotate("text", x = 223, y = 3000, label = "It is hard to differentiate \n Chinstrap and Adelie") +
  geom_curve(
    data = arrows, aes(x = x1, y = y1, xend = x2, yend = y2),
    arrow = arrow(length = unit(0.08, "inch")), size = 0.5,
    color = "gray20", curvature = -0.3)
```


And Miss 9 thought the colour pallete could do with some work. The Luna Lovegood palette from the [harrypotter package](https://github.com/aljrico/harrypotter) is her favourite. 


```{r message=FALSE, warning=FALSE}
library(harrypotter)

penguins %>%
  ggplot(aes(x = flipper_length_mm, y = body_mass_g, colour = species)) +
  geom_point() +
  annotate("text", x = 180, y = 6000, label = "Gentoo penguins \n are much larger") +
  annotate("text", x = 223, y = 3000, label = "It is hard to differentiate \n Chinstrap and Adelie") +
  geom_curve(
    data = arrows, aes(x = x1, y = y1, xend = x2, yend = y2),
    arrow = arrow(length = unit(0.08, "inch")), size = 0.5,
    color = "gray20", curvature = -0.3) +
  scale_colour_hp_d(option = "LunaLovegood")
```

