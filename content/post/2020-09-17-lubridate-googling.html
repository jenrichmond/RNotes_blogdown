---
title: first google
author: ''
date: '2020-09-17'
slug: lubridate-googling
image: "img/portfolio/datenight.jpg"
categories: []
tags: []
---



<p>I have set myself a challenge of learning to deal with dates in R. Nothing like setting a date for an R-Ladies Sydney event where you will teach other people to spur the motivation for learning how to use the <code>lubridate</code> package.</p>
<p>The plan is to learn how to use the package and document my learning process along the way so that at the end of Oct I can tell everyone…</p>
<ol style="list-style-type: decimal">
<li>how to deal with dates in R and</li>
<li>how to learn about a new package from the very beginning</li>
</ol>
<p>So where to start?</p>
<p>Google of course. Tonight I spent a little time looking for books, blogs, youtube videos, documentation, and twitter threads about lubridate. I have no idea whether any of these links will be useful, but they will be here for reference anyway.</p>
<div id="books" class="section level3">
<h3>1. books</h3>
<p>R4DS has a <a href="https://r4ds.had.co.nz/dates-and-times.html">chapter about dates/times</a>.</p>
<p><a href="http://biostat.mc.vanderbilt.edu/wiki/pub/Main/ColeBeck/datestimes.pdf">vanderbult bio stat</a></p>
<p><a href="https://bookdown.org/mikemahoney218/LectureBook/working-with-dates-and-times.html">Mike Mahoney lecture book</a></p>
</div>
<div id="blogs" class="section level3">
<h3>2. blogs</h3>
<p><a href="https://juliasilge.com/blog/lubridate-london-stage/">Julia Silge re lubridate and theatre</a></p>
<p>Ooooo i got excited about this one and it derailed my googling for a bit because this blog post does exactly what i think a good blog tutorial should do. The dataset is key right? You need to find a dataset that requires the thing you are trying to learn, because it adds motivation your learning. In this case Julia’s blog is about history and theatre- fun!</p>
<p>Reading this blog derailed my google process by making me want to mimic her process. I need a cool dataset to play with. Maybe the penguins have dates? Covid testing rates over time would be interesting…. hence the choppy code at the end of this post….</p>
<p>Wait wait wait, one step at a time Jen. Compile the resources you need, and then find a dataset to work with.</p>
<p>Thanks for getting me excited about the process Julia!</p>
<p><a href="http://www.rebeccabarter.com/categories/lubridate/">Rebecca Barter’s blogs are always good</a></p>
<p>Maybe also useful…</p>
<ul>
<li><p><a href="https://www.earthdatascience.org/courses/earth-analytics/time-series-data/date-class-in-r/" class="uri">https://www.earthdatascience.org/courses/earth-analytics/time-series-data/date-class-in-r/</a></p></li>
<li><p><a href="https://blog.exploratory.io/5-most-practically-useful-operations-when-working-with-date-and-time-in-r-9f9eb8a17465" class="uri">https://blog.exploratory.io/5-most-practically-useful-operations-when-working-with-date-and-time-in-r-9f9eb8a17465</a></p></li>
</ul>
</div>
<div id="you-tube" class="section level3">
<h3>3. you tube</h3>
<p>I didn’t look very hard on youtube, this one might be ok…</p>
<p><a href="https://www.youtube.com/watch?v=46UFzO1EgBo" class="uri">https://www.youtube.com/watch?v=46UFzO1EgBo</a></p>
</div>
<div id="package-documentation" class="section level3">
<h3>4. package documentation</h3>
<p><a href="https://lubridate.tidyverse.org/" class="uri">https://lubridate.tidyverse.org/</a></p>
<p>Interesting that, for me, package documentation is almost the last place I look for learning inspiration. Why is that…. to unpack later.</p>
</div>
<div id="twitter" class="section level3">
<h3>5. twitter</h3>
<p>I learn a lot about #rstats on twitter. People post about their blog posts, or data challenges and other kind souls help them out. Links to potentially useful threads below.</p>
<p><a href="https://twitter.com/JenRichmondPhD/status/1229925408688111616">today</a></p>
<p><a href="https://twitter.com/MilesMcBain/status/1194565470906503169">timezones</a></p>
<p><a href="https://twitter.com/fonti_kar/status/1254570510043643904">formats</a></p>
<p><a href="https://twitter.com/kierisi/status/1245532577932414976">here/lubridate clash</a></p>
<p><a href="https://twitter.com/sharlagelfand/status/1244987516987588609">stamp</a></p>
<p><a href="https://twitter.com/icymi_r/status/1282962590461812736">cheatsheet</a></p>
</div>
<div id="art" class="section level3">
<h3>6. art</h3>
<p>I found Allison’s art re lubridate on twitter, but it is SO CUTE that it deserves its own category.</p>
<p><img src="https://github.com/allisonhorst/stats-illustrations/raw/master/rstats-artwork/lubridate.png" /></p>
<p><img src="https://github.com/allisonhorst/stats-illustrations/raw/master/rstats-artwork/lubridate_ymd.png" /></p>
</div>
<div id="issues-to-explore" class="section level2">
<h2>Issues to explore</h2>
<ul>
<li>sometimes R reads dates in as dates, and other times not
<ul>
<li>how to make R recognise dates as dates</li>
<li>how to work with dates once you have date format</li>
</ul></li>
<li>how to use date components (year, month, day) in plots, btw label = TRUE seems awesome</li>
<li>making your raw dates be automatically read as such, how to make your date data easy for others?</li>
<li>clash with here::here, new version of lubridate won’t have here() function?? that was the word from Hadley Apr 3 2020- check whether there has been a new release.</li>
</ul>
</div>
<div id="ignore-below-here-i-got-distracted" class="section level2">
<h2>ignore below here, I got distracted</h2>
<pre class="r"><code>library(palmerpenguins)
library(here)
library(tidyverse)
library(lubridate)</code></pre>
<div id="penguins" class="section level4">
<h4>penguins</h4>
<p>Maybe the palmer penguin package has interesting date data?</p>
<p>Yes there are dates in the raw file but not the cleaned up one.</p>
<pre class="r"><code>penguins &lt;- penguins_raw

glimpse(penguins)</code></pre>
<p>Well that is nice, when you read the penguin data the dates are already in date format. No need to convert.</p>
</div>
<div id="covid-testing" class="section level4">
<h4>covid testing</h4>
<p>hmmmm I think this might be where I’ve been put off lubridate before. here::here clashes with lubridate, such that if you have both packages loaded you need to specificy here::here- thats annoying. Link to <a href="https://twitter.com/kierisi/status/1245532577932414976">Jesse twitter thread</a> where Hadley says here is being removed from lubridate in the next release. I wonder when that is??? Maybe I need to update my lubridate.</p>
<pre class="r"><code>## this one works fine
tests &lt;- read_csv(here::here(&quot;data&quot;, &quot;pcr_testing_table2_age_group.csv&quot;))</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   test_date = col_date(format = &quot;&quot;),
##   age_group = col_character()
## )</code></pre>
<pre class="r"><code>## this one doesn&#39;t b/c here issue

cases &lt;- read_csv(here(&quot;data&quot;, &quot;confirmed_cases_table4_likely_source.csv&quot;))

glimpse(tests)</code></pre>
<p>Yay COVID test data also has date format. I wonder how you make your raw data be automatically read in as dates. Mine never is…</p>
<pre class="r"><code>library(wesanderson)
options(scipen = 999)  

test_by_age &lt;- tests %&gt;%
  group_by(month(test_date, label = TRUE)) %&gt;% 
  count(age_group) %&gt;%
  rename(month = `month(test_date, label = TRUE)`) 

# label = true is sweet!

test_by_age %&gt;%
  filter(age_group !=  &quot;AgeGroup_None&quot;) %&gt;%
  ggplot(aes(x = month, y = n, colour = age_group, group = age_group)) +
  geom_point() +
  geom_line() + 
  scale_color_brewer(palette=&quot;Paired&quot;) +
  scale_y_continuous(expand = c(0, 0), limits = c(0, 150000)) +
  labs(y = &quot;COVID tests per month&quot;, title = &quot;NSW testing rates per month&quot;) +
  theme_classic()</code></pre>
<p><img src="/post/2020-09-17-lubridate-googling_files/figure-html/unnamed-chunk-5-1.png" width="672" /></p>
<blockquote>
<p>This data is from 17-9-2020, but seems like the NSW Chief Health Officer is right to be concerned about testing rates!</p>
</blockquote>
<pre class="r"><code>test_by_month &lt;- tests %&gt;%
  group_by(month(test_date, label = TRUE)) %&gt;% 
  count() %&gt;%
  rename(month = `month(test_date, label = TRUE)`) 


test_by_month %&gt;%
  ggplot(aes(x = month, y = n, group = 1)) +
  geom_point() +
  geom_line() +
  scale_y_continuous(expand = c(0, 0), limits = c(0, 800000)) +
  labs(y = &quot;COVID tests per month&quot;, title = &quot;NSW testing rates per month&quot;, caption = &quot;data downloaded 17-9-2020&quot;) +
  theme_classic()</code></pre>
<p><img src="/post/2020-09-17-lubridate-googling_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
</div>
</div>
