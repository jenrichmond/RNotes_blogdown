---
title: IDHTG how to annotate plots
author: ''
date: '2020-10-14'
slug: idhtg-how-to-annotate-plots
image: "img/portfolio/annotate.png"
categories: []
tags: []
---



<p>A new post in my I Donâ€™t Have to Google (IDHTG) series. Iâ€™ve been wanting to work out how to add annotations to plots for a while and this plot from the <span class="citation">@WeAreRladies</span> account this week got me inspired!</p>
<blockquote class="twitter-tweet">
<p lang="en" dir="ltr">
I also looked at activity by week. You can see that there are some weeks when there was a break between curators. You can also see curators are totally different - both in terms of number of tweets and the number of retweets and replies. One curator tweeted over 200 times! ðŸ¤¯ <a href="https://t.co/F49YddjxUx">pic.twitter.com/F49YddjxUx</a>
</p>
â€” We are R-Ladies (<span class="citation">@WeAreRLadies</span>) <a href="https://twitter.com/WeAreRLadies/status/1313178171219619840?ref_src=twsrc%5Etfw">October 5, 2020</a>
</blockquote>
<script async src="https://platform.twitter.com/widgets.js" charset="utf-8"></script>
<p><br></p>
<p>Giorgia, who is curating WeAreRLadies this week, suggested checking out <a href="https://cedricscherer.netlify.app/2019/05/17/the-evolution-of-a-ggplot-ep.-1/">this blog post</a> by Cedric Scherer. It is a great illustration of how you might start with a basic box plot and turn it into something that looks REALLY fancy, step by step.</p>
<p>Lets plot some penguin data to practice.</p>
<div id="load-packages" class="section level1">
<h1>load packages</h1>
<pre class="r"><code>library(tidyverse)
library(palmerpenguins)</code></pre>
</div>
<div id="read-data" class="section level1">
<h1>read data</h1>
<pre class="r"><code>penguins &lt;- penguins</code></pre>
</div>
<div id="plot-body-mass-by-flipper-length" class="section level1">
<h1>plot body mass by flipper length</h1>
<p>Add text to a ggplot using annotate(), just define x and y coordinates and what you want the label to say.</p>
<pre class="r"><code>g_text &lt;- penguins %&gt;%
  ggplot(aes(x = flipper_length_mm, y = body_mass_g, colour = species)) +
  geom_point() +
  annotate(&quot;text&quot;, x = 180, y = 6000, label = &quot;Add text here&quot;) +
  annotate(&quot;text&quot;, x = 220, y = 3000, label = &quot;More text here&quot;)
  
  
g_text</code></pre>
<p><img src="/post/2020-10-14-idhtg-how-to-annotate-plots_files/figure-html/unnamed-chunk-3-1.png" width="672" />
To add arrows, first make a tibble that has x1, x2, y1, and y2 coordinates for where you want the curved line to start and stop. On my penguin plot I want two arrows, one in the top left and another in the bottom right.</p>
<pre class="r"><code>arrows &lt;- 
  tibble(
    x1 = c(187, 212),
    x2 = c(205, 204),
    y1 = c(6000, 3000), 
    y2 = c(5500, 3500)
  )

arrows</code></pre>
<pre><code>## # A tibble: 2 x 4
##      x1    x2    y1    y2
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1   187   205  6000  5500
## 2   212   204  3000  3500</code></pre>
<p>Then use geom_curve() to add arrows, adjusting and adjusting and adjusting until they fall where you want them.</p>
<pre class="r"><code>g_text +
  geom_curve(
    data = arrows, aes(x = x1, y = y1, xend = x2, yend = y2),
    arrow = arrow(length = unit(0.08, &quot;inch&quot;)), size = 0.5,
    color = &quot;gray20&quot;, curvature = -0.3)</code></pre>
<p><img src="/post/2020-10-14-idhtg-how-to-annotate-plots_files/figure-html/unnamed-chunk-5-1.png" width="672" />
We should probably make the annotations meaningful.</p>
<pre class="r"><code>penguins %&gt;%
  ggplot(aes(x = flipper_length_mm, y = body_mass_g, colour = species)) +
  geom_point() +
  annotate(&quot;text&quot;, x = 180, y = 6000, label = &quot;Gentoo penguins \n are much larger&quot;) +
  annotate(&quot;text&quot;, x = 223, y = 3000, label = &quot;It is hard to differentiate \n Chinstrap and Adelie&quot;) +
  geom_curve(
    data = arrows, aes(x = x1, y = y1, xend = x2, yend = y2),
    arrow = arrow(length = unit(0.08, &quot;inch&quot;)), size = 0.5,
    color = &quot;gray20&quot;, curvature = -0.3)</code></pre>
<p><img src="/post/2020-10-14-idhtg-how-to-annotate-plots_files/figure-html/unnamed-chunk-6-1.png" width="672" /></p>
<p>And Miss 9 thought the colour pallete could do with some work. The Luna Lovegood palette from the <a href="https://github.com/aljrico/harrypotter">harrypotter package</a> is her favourite.</p>
<pre class="r"><code>library(harrypotter)

penguins %&gt;%
  ggplot(aes(x = flipper_length_mm, y = body_mass_g, colour = species)) +
  geom_point() +
  annotate(&quot;text&quot;, x = 180, y = 6000, label = &quot;Gentoo penguins \n are much larger&quot;) +
  annotate(&quot;text&quot;, x = 223, y = 3000, label = &quot;It is hard to differentiate \n Chinstrap and Adelie&quot;) +
  geom_curve(
    data = arrows, aes(x = x1, y = y1, xend = x2, yend = y2),
    arrow = arrow(length = unit(0.08, &quot;inch&quot;)), size = 0.5,
    color = &quot;gray20&quot;, curvature = -0.3) +
  scale_colour_hp_d(option = &quot;LunaLovegood&quot;)</code></pre>
<p><img src="/post/2020-10-14-idhtg-how-to-annotate-plots_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
</div>
